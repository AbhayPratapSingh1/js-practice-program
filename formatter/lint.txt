
const pushAndClear = (collection, characters) => {
if (characters.length !== 0) {
collection.push(characters.join(""));
characters.splice(0, characters.length);
}
};

const splitExpression = (line) => {
const lineElements = [];
let currentElement = [];
let index = 0;

while   (  index    <    line.length) {
let    delta = 1;
const current = line[index];

    if (isStringStart(current)) {
      pushAndClear(lineElements, currentElement);

      const strAndIndex = extractString(line, index);
      lineElements.push(strAndIndex[0]);

      delta = strAndIndex[1];
    } else {
      if (current === " " && currentElement.length !== 0) {
        lineElements.push(currentElement.join(""));
        currentElement = [];
      } else if (isOperator(current)) {
        pushAndClear(lineElements, currentElement);
        lineElements.push(current);
      } else if (current !== " ") currentElement.push(current);
    }

    index += delta;
  }
  lineElements.push(currentElement.join(""));

  return lineElements;
};
